<!DOCTYPE html>

{% load staticfiles %} <!--Load the static folder will be referenced later-->

<html>
	<head>
		<title>Ocu-Pants</title>
        
        <script type="text/javascript" src=" {{ STATIC_URL }} Libraries/jquery.js"></script>
        <script type="text/javascript" src=" {{ STATIC_URL }} Libraries/jquery.jqplot/jquery.min.js"></script>
        <script type="text/javascript" src=" {{ STATIC_URL }} Libraries/jquery.jqplot/jquery.jqplot.js"></script>
        <script type="text/javascript" src=" {{ STATIC_URL }} Libraries/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.js"></script>
        <script type="text/javascript" src=" {{ STATIC_URL }} Libraries/jquery.jqplot"></script>
        <script type="text/javascript" src=" {{ STATIC_URL }} Libraries/jquery.jqplot/plugins/jqplot.canvasTextRenderer.js"></script>
        <script type="text/javascript" src=" {{ STATIC_URL }} Libraries/jquery.jqplot/plugins/jqplot.canvasAxisLabelRenderer.js"></script>
		<meta charset="utf-8">
		<link rel="stylesheet" href="{% static 'css/style.css' %}"> <!--load style.css from static folder-->
	</head>
	
	<body>
       <form action="" method="POST">{% csrf_token %} <!--form to select room using post method and sending a csrf token-->
            <select name="roomForm" onchange="this.form.submit()"> <!--submit on change-->
                <option value="" selected></option>
                {% for room in roomList %} <!--automatically generate the form options from roomList-->
                <option value="{{ room.room }}">{{ room.room }}</option>
            {% endfor %}
            </select>
        </form>
        
        <div class="centered"> <!--Display each field of the returned room object-->
            <h3>{{ roomObj.0.campus }}  {{ roomObj.0.building }}  {{ roomObj.0.room }}  {{ roomObj.0.capacity }}</h3><br>
            <h3>{{ timeList }}</h3>
        </div>
        
        <div class="centered" id="tableDiv" style="Display: block">
            <table> <!--Display the table headings-->
                <tr><th></th><th>Monday</th><th>Tuesday</th><th>Wednesday</th><th>Thursday</th><th>Friday</th></tr> 

                {% for y in timeList %} <!--build rows by identifing each timeslot 9am - 5pm in turn-->

                    <tr><th>{{ y }}</th>
                        
                    {% for timeSlot in roomSchedule %} <!--build columns by cycling through the object and displaying the module with the correct time-->
                        {% if timeSlot.datetime.hour == y.hour  %}
                            <td id="{{ timeSlot.timemoduleid }}" onclick="CellClick({{ timeSlot.timemoduleid }})">{{ timeSlot.module.modulename }}</td> <!--Display the cell-->
                        {% endif %}
                    {% endfor %}
                    </tr>
                {% endfor %}
            </table>
        </div>
        
        <div class="centered" id="graphDiv">
            
            
        </div>
    </body>
    
    <script>
        
        function CellClick(x) {
            document.getElementById(x).style.backgroundColor = 'green'; 
        }
    </script>
    <script>
      
       
        function GraphGenerator() {
            
            document.getElementById('graphDiv').style.display = 'inline-block';
            document.getElementById('graphDiv').innerHTML = "";
            
            var graphTemp = [[3, 11], [6, 12], [9, 10], [12, 9] [15, 12] [18, 14] [21, 11] [24, 13]];
            
            $(document).ready(function(){
                var lineGraph = $.jqplot ('graphDiv', [graphTemp], {
                    seriesDefaults: {
                        rendererOptions: {
                            smooth: true
                        }
                    },
                    axes: {
                        xaxis: {min: 0, max: 24, numberTicks:9
                        }, 
                        yaxis: {    
                        }
                    }
                });
                $('#graph').html(lineGraph)
            }

        
    </script>
</html>                